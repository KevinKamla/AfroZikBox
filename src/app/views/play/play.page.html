<ion-content [fullscreen]="true" class="music-player-content">
  <div class="container">
    <div class="bloc_header">
      <ion-buttons slot="start">
        <ion-button (click)="goToRoute('')">
          <ion-icon slot="icon-only" name="arrow-back-outline"></ion-icon>
        </ion-button>
      </ion-buttons>
      <ion-buttons slot="end">
        <ion-button [routerLink]="['/musicdetails']">
          <ion-icon
            slot="icon-only"
            class="icon-alert"
            name="alert-circle-outline"
          ></ion-icon>
        </ion-button>
      </ion-buttons>
    </div>

    <div class="bg-img">
      <div class="gradient-overlay"></div>
      <img [src]="currentSong?.thumbnail" alt="Album cover" class="album-cover-bg"/>
      
      <div class="img-details">
        <img [src]="currentSong?.thumbnail" alt="Album cover" class="album-cover"/>
        <div class="tags">
          <b class="song-title">{{ currentSong?.title }}</b>
          <p class="song-description">{{ cleanDescription(currentSong?.description) }}</p>
        </div>
      </div>
    </div>

    <!-- Progress Bar -->
    <div class="progress-bar">
      <ion-range
        min="0"
        [max]="duration"
        step="1"
        [(ngModel)]="currentTime"
        (ionChange)="seekTo($event)"
      >
        <ion-label slot="start">{{ formatTime(currentTime) }}</ion-label>
        <ion-label slot="end">{{ formatTime(duration) }}</ion-label>
      </ion-range>
    </div>

      <div class="flex_box">
        <ion-button shape="round" fill="clear" (click)="toggleRepeatOne()">
          <ion-icon
            slot="icon-only"
            name="repeat"
            [color]="isRepeatOneEnabled ? 'primary' : 'medium'"
          ></ion-icon>
        </ion-button>

        <ion-button shape="round" fill="clear" (click)="playPreviousSong()">
          <ion-icon slot="icon-only" name="play-skip-back"></ion-icon>
        </ion-button>

        <ion-button shape="round" fill="clear" (click)="rewind()">
          <ion-icon slot="icon-only" name="play-back"></ion-icon>
        </ion-button>

        <ion-button
          shape="round"
          fill="clear"
          class="buttonPause"
          (click)="togglePlayPause()"
        >
          <ion-icon
            slot="icon-only"
            [name]="isPlaying ? 'pause' : 'play'"
          ></ion-icon>
        </ion-button>

        <ion-button shape="round" fill="clear" (click)="skipForward()">
          <ion-icon slot="icon-only" name="play-forward"></ion-icon>
        </ion-button>

        <ion-button shape="round" fill="clear" (click)="playNextSong()">
          <ion-icon slot="icon-only" name="play-skip-forward"></ion-icon>
        </ion-button>

        <ion-button shape="round" fill="clear" (click)="toggleShuffle()">
          <ion-icon
            slot="icon-only"
            name="shuffle"
            [color]="isShuffleEnabled ? 'primary' : 'medium'"
          ></ion-icon>
        </ion-button>
      </div>

      <div class="flex_box2">
        <ion-button shape="round" fill="clear">
          <ion-icon slot="icon-only" name="paper-plane-outline"></ion-icon>
        </ion-button>
        <!-- <ion-button shape="round" fill="clear">
          <ion-icon
            slot="icon-only"
            name="chatbubble-ellipses-outline"
          ></ion-icon>
        </ion-button> -->
        <ion-button shape="round" fill="clear" (click)="openCommentsModal(currentSong)">
          <ion-icon slot="icon-only" name="chatbubble-ellipses-outline"></ion-icon>
        </ion-button>
        <ion-button shape="round" fill="clear" (click)="toggleFavorite(currentSong.audio_id)">
          <ion-icon slot="icon-only" [name]="love ? 'star' : 'star-outline'" [color]="love ? 'warning' : 'yellow'"></ion-icon>
        </ion-button>
        <ion-button shape="round" fill="clear" (click)="likeSong(currentSong.audio_id)" [disabled]="liked">
          <ion-icon slot="icon-only" [name]="liked ? 'heart' : 'heart-outline'" [color]="liked ? 'danger' : 'medium'"></ion-icon>
        </ion-button>
        <ion-button shape="round" fill="clear" (click)="dislikeSong(currentSong.audio_id)" [disabled]="!liked">
          <ion-icon slot="icon-only" name="heart-dislike-outline"></ion-icon>
        </ion-button>
        <ion-button shape="round" fill="clear" (click)="download()">
          <ion-icon slot="icon-only" name="download-outline"></ion-icon>
        </ion-button>
        <ion-button shape="round" fill="clear" (click)="openOptionSound()">
          <ion-icon slot="icon-only" name="ellipsis-vertical"></ion-icon>
        </ion-button>
      </div>
    </div>
</ion-content>
