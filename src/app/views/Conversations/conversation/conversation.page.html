<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button></ion-back-button>
    </ion-buttons>
    <ion-title>Conversations</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="chat-list-content">
    <div class="container">
      <ion-list>
        <ion-item *ngFor="let chat of chats" button (click)="openChat(chat)" class="chat-item">
          <ion-avatar slot="start">
            <img [src]="chat.user.avatar || 'assets/icon/profil.png'" alt="User avatar" />
          </ion-avatar>
          <div class="chat-details">
            <h3 class="chat-username">{{ chat.user.name }}</h3>
            <ng-container *ngIf="chat.get_last_message">
              <ng-container *ngIf="chat.get_last_message.API_type === 'text'; else imageTemplate">
                <p class="chat-message">{{ chat.get_last_message.text }}</p>
              </ng-container>
              <ng-template #imageTemplate>
                <img
                  [src]="chat.get_last_message.full_image"
                  class="chat-image"
                  alt="Image message"
                />
              </ng-template>
            </ng-container>
          </div>
          <p class="chat-time">il y a {{ calculateTimeSince(chat.chat_time) }}</p>
        </ion-item>
      </ion-list>
    </div>
  </ion-content>
  